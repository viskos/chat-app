(this.webpackJsonpfbschat=this.webpackJsonpfbschat||[]).push([[0],{81:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t),n.d(t,"Context",(function(){return U}));var c=n(7),r=n(1),a=n.n(r),i=n(15),s=n.n(i),o=(n(81),n(23)),j=n(42),l=n(17),u="/login",d="/chat",b=n(38),h=n.n(b),f=n(47),O=n(120),p=n(123),x=n(128),g=n(129),m=n(29),v=function(){var e=Object(r.useContext)(U).auth,t=function(){var t=Object(f.a)(h.a.mark((function t(){var n,c,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new m.a.auth.GoogleAuthProvider,t.next=3,e.signInWithPopup(n);case 3:c=t.sent,r=c.user,console.log(r);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.jsx)(O.a,{children:Object(c.jsx)(p.a,{container:!0,style:{height:window.innerHeight-50},alignItems:"center",justify:"center",children:Object(c.jsx)(p.a,{container:!0,alignItems:"center",direction:"column",style:{width:400,background:"lightgray"},children:Object(c.jsx)(x.a,{p:5,children:Object(c.jsx)(g.a,{variant:"outlined",onClick:t,children:"Login with Google"})})})})})},y=n(31),w=n(130),C=n(126),I=n(65),k=function(){return Object(c.jsx)(O.a,{children:Object(c.jsx)(p.a,{container:!0,style:{height:window.innerHeight-50},alignItems:"center",justify:"center",children:Object(c.jsx)(p.a,{container:!0,alignItems:"center",direction:"column",children:Object(c.jsxs)("div",{className:"lds-ellipsis",children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})})})})},R=[{path:u,Component:v}],B=[{path:d,Component:function(){var e=Object(r.useContext)(U),t=e.auth,n=e.firestore,a=Object(y.a)(t),i=Object(o.a)(a,1)[0],s=Object(r.useState)(""),j=Object(o.a)(s,2),l=j[0],u=j[1],d=Object(r.useState)([]),b=Object(o.a)(d,2),O=b[0],x=b[1],v=Object(r.useState)([]),R=Object(o.a)(v,2),B=R[0],L=R[1],S=Object(r.useRef)(null),A=Object(I.a)(n.collection("messages").orderBy("createdAt")),N=Object(o.a)(A,2),P=N[0],E=N[1];Object(r.useEffect)((function(){P&&(S.current.scrollTop=S.current.scrollHeight)}));var F=function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),alert(O),n.collection("messages").add({uid:i.uid,displayName:i.displayName,photoURL:i.photoURL,text:l,image:B,createdAt:m.a.firestore.FieldValue.serverTimestamp()}),u(""),x([]),L([]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(e){e.forEach((function(e){var t=B,n=new FileReader;n.readAsDataURL(e),n.onload=function(){t.push(n.result),L(t)},n.onerror=function(e){console.error(e)}}))};return E?Object(c.jsx)(k,{}):Object(c.jsxs)(p.a,{container:!0,justify:"center",style:{height:window.innerHeight-50},children:[Object(c.jsx)("div",{ref:S,style:{width:"100%",height:"70vh",overflowY:"auto"},children:P.map((function(e){return Object(c.jsxs)("div",{style:{margin:10,backgroundColor:i.uid===e.uid?"#2B5279":"#182633",color:"#fff",borderRadius:5,marginLeft:i.uid===e.uid?"auto":"10px",width:"fit-content",padding:10},children:[Object(c.jsxs)(p.a,{container:!0,alignItems:"center",children:[Object(c.jsx)(w.a,{src:e.photoURL}),Object(c.jsx)("div",{children:e.displayName})]}),Object(c.jsx)("div",{style:{paddingTop:10},children:e.text}),Object(c.jsx)("div",{children:e.image.map((function(e,t){return Object(c.jsx)("img",{style:{width:"200px",margin:"5px"},src:e},t)}))})]},e.text)}))}),Object(c.jsx)(p.a,{container:!0,direction:"column",alignItems:"flex-end",style:{width:"100%",backgroundColor:"#17212B"},children:Object(c.jsxs)("form",{style:{width:"100%"},children:[Object(c.jsx)(C.a,{variant:"outlined",label:"Enter message",fullWidth:!0,rowsMax:2,value:l,onChange:function(e){return u(e.target.value)},autoFocus:!0,style:{color:"#fff",borderColor:"#fff"}}),Object(c.jsx)(g.a,{type:"submit",color:"default",onClick:F,variant:"outlined",children:"Send"}),Object(c.jsxs)("label",{className:"attach-file",children:["File",Object(c.jsx)("input",{type:"file",onChange:function(e){var t=O;t.push(e.target.files),x(t),G(Object.values(t[0]))},multiple:!0})]})]})})]})}}],L=function(){var e=Object(r.useContext)(U).auth,t=Object(y.a)(e);return Object(o.a)(t,1)[0]?Object(c.jsxs)(l.d,{children:[B.map((function(e){var t=e.path,n=e.Component;return Object(c.jsx)(l.b,{path:t,component:n,exact:!0},t)})),Object(c.jsx)(l.a,{to:d})]}):Object(c.jsxs)(l.d,{children:[R.map((function(e){var t=e.path,n=e.Component;return Object(c.jsx)(l.b,{path:t,component:n,exact:!0},t)})),Object(c.jsx)(l.a,{to:u})]})},S=n(124),A=n(125),N=function(){var e=Object(r.useContext)(U).auth,t=Object(y.a)(e),n=Object(o.a)(t,1)[0];return Object(c.jsx)(S.a,{color:"transparent",position:"static",children:Object(c.jsx)(A.a,{variant:"dense",children:Object(c.jsx)(p.a,{container:!0,justify:"flex-end",children:n?Object(c.jsx)(g.a,{style:{color:"#fff"},onClick:function(){return e.signOut()},children:"LogOut"}):Object(c.jsx)(j.b,{to:u,children:Object(c.jsx)(g.a,{style:{color:"#fff"},children:"LogIn"})})})})})};var P=function(){var e=Object(r.useContext)(U).auth,t=Object(y.a)(e),n=Object(o.a)(t,3),a=(n[0],n[1]);return n[2],a?Object(c.jsx)(k,{}):Object(c.jsxs)(j.a,{children:[Object(c.jsx)(N,{}),Object(c.jsx)(L,{})]})};n(89),n(90);m.a.initializeApp({apiKey:"AIzaSyCuuAXbn99vaBBx-73wGOOB-Zg6phCZQrU",authDomain:"chat-fbsrct.firebaseapp.com",projectId:"chat-fbsrct",storageBucket:"chat-fbsrct.appspot.com",messagingSenderId:"545532414519",appId:"1:545532414519:web:332853a505f970323e4db2",measurementId:"G-RJPS65PC9R"});var U=Object(r.createContext)(null),E=m.a.auth(),F=m.a.firestore();s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(U.Provider,{value:{firebase:m.a,auth:E,firestore:F},children:Object(c.jsx)(P,{})})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.1a59191f.chunk.js.map
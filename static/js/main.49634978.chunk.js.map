{"version":3,"sources":["utils/consts.js","components/Login.js","components/Loader.js","routes.js","components/Chat.js","components/AppRouter.js","components/Navbar.js","App.js","index.js"],"names":["LOGIN_ROUTE","CHAT_ROUTE","Login","auth","useContext","Context","login","a","provider","firebase","GoogleAuthProvider","signInWithPopup","user","console","log","Container","Grid","container","style","height","window","innerHeight","alignItems","justify","direction","width","background","Box","p","Button","variant","onClick","Loader","className","publicRoutes","path","Component","privateRoutes","firestore","useAuthState","useState","value","setValue","chatRef","useRef","useCollectionData","collection","orderBy","message","loading","useEffect","current","scrollTop","scrollHeight","sendMessage","e","preventDefault","add","uid","displayName","photoURL","text","createdAt","FieldValue","serverTimestamp","marginTop","ref","border","overflowY","map","margin","borderRadius","marginLeft","padding","Avatar","src","paddingTop","TextField","label","fullWidth","rowsMax","onChange","target","autoFocus","type","AppRouter","component","exact","to","Navbar","AppBar","position","Toolbar","signOut","App","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","createContext","ReactDOM","render","StrictMode","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.49634978.chunk.js","sourcesContent":["export const LOGIN_ROUTE = '/login'\nexport const CHAT_ROUTE = '/chat'","import React, {useContext} from 'react'\nimport {Container, Grid} from \"@material-ui/core\";\nimport Box from \"@material-ui/core/Box\";\nimport Button from \"@material-ui/core/Button\";\nimport {Context} from \"../index\";\nimport firebase from \"firebase\";\n\nconst Login = () => {\n    const {auth} = useContext(Context)\n\n    const login = async () => {\n        const provider = new firebase.auth.GoogleAuthProvider()\n        const {user} = await auth.signInWithPopup(provider)\n        console.log(user)\n    }\n\n    return (\n        <Container>\n            <Grid\n                container\n                style={{height: window.innerHeight - 50}}\n                alignItems={\"center\"}\n                justify={\"center\"}\n            >\n                <Grid\n                    container\n                    alignItems={\"center\"}\n                    direction={\"column\"}\n                    style={{width: 400, background: 'lightgray'}}\n                >\n                    <Box p={5}>\n                        <Button\n                            variant={\"outlined\"}\n                            onClick={login}\n                        >\n                            Login with Google\n                        </Button>\n                    </Box>\n                </Grid>\n            </Grid>\n        </Container>\n    )\n}\n\nexport default Login","import React from 'react'\nimport {Container, Grid} from \"@material-ui/core\";\nimport Box from \"@material-ui/core/Box\";\nimport Button from \"@material-ui/core/Button\";\n\nconst Loader = () => {\n    return (\n        <Container>\n            <Grid\n                container\n                style={{height: window.innerHeight - 50}}\n                alignItems={\"center\"}\n                justify={\"center\"}\n            >\n                <Grid\n                    container\n                    alignItems={\"center\"}\n                    direction={\"column\"}\n                >\n                    <div className=\"lds-ellipsis\">\n                        <div></div>\n                        <div></div>\n                        <div></div>\n                        <div></div>\n                    </div>\n                </Grid>\n            </Grid>\n        </Container>\n    )\n}\n\nexport default Loader","import { CHAT_ROUTE, LOGIN_ROUTE } from './utils/consts'\nimport Login from './components/Login'\nimport Chat from './components/Chat'\n\nexport const publicRoutes = [\n    {\n        path: LOGIN_ROUTE,\n        Component: Login\n    }\n]\n\nexport const privateRoutes = [\n    {\n        path: CHAT_ROUTE,\n        Component: Chat\n    }\n]","import React, {useContext, useEffect, useRef, useState} from 'react'\nimport {Context} from \"../index\";\nimport {useAuthState} from \"react-firebase-hooks/auth\";\nimport {Avatar, Container, Grid} from \"@material-ui/core\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport {useCollectionData} from \"react-firebase-hooks/firestore\";\nimport Loader from \"./Loader\";\nimport firebase from \"firebase\";\n\nconst Chat = () => {\n    const {auth, firestore} = useContext(Context)\n    const [user] = useAuthState(auth)\n    const [value, setValue] = useState('')\n    const chatRef = useRef(null)\n    const [message, loading] = useCollectionData(\n        firestore.collection('messages').orderBy('createdAt')\n    )\n\n    useEffect(() => {\n        if (message) chatRef.current.scrollTop = chatRef.current.scrollHeight\n    })\n\n    const sendMessage = async (e) => {\n        e.preventDefault()\n        firestore.collection('messages').add({\n            uid: user.uid,\n            displayName: user.displayName,\n            photoURL: user.photoURL,\n            text: value,\n            createdAt: firebase.firestore.FieldValue.serverTimestamp()\n        })\n        setValue('')\n    }\n\n    if (loading) {\n        return <Loader/>\n    }\n\n    return (\n        <Container>\n            <Grid\n                container\n                justify={\"center\"}\n                style={{height: window.innerHeight - 50, marginTop: 20}}\n            >\n                <div ref={chatRef} style={{width: '100%', height: '70vh', border: '1px solid #dadada', overflowY: 'auto'}}>\n                    {\n                        message.map(message =>\n                            <div style={{\n                                margin: 10,\n                                border: user.uid === message.uid ? '1px solid #3CAEA3' : '1px solid #ED553B',\n                                borderRadius: 5,\n                                marginLeft: user.uid === message.uid ? 'auto' : '10px',\n                                width: 'fit-content',\n                                padding: 10\n                            }}>\n                                <Grid container>\n                                    <Avatar src={message.photoURL}/>\n                                    <div>{message.displayName}</div>\n                                </Grid>\n                                <div\n                                    style={{paddingTop: 10}}\n                                >\n                                    {message.text}\n                                </div>\n                            </div>\n                        )\n                    }\n                </div>\n                <Grid\n                    container\n                    direction={\"column\"}\n                    alignItems={\"flex-end\"}\n                    style={{width: '100%'}}\n                >\n                    <form style={{width: '100%'}}>\n                        <TextField\n                            variant={\"outlined\"}\n                            label={'Enter message'}\n                            fullWidth\n                            rowsMax={2}\n                            value={value}\n                            onChange={(e) => setValue(e.target.value)}\n                            autoFocus\n                        />\n                        <Button type={\"submit\"} onClick={sendMessage} variant={\"outlined\"}>Send</Button>\n                    </form>\n                </Grid>\n            </Grid>\n        </Container>\n    )\n}\n\nexport default Chat","import React, {useContext} from 'react'\nimport { Route, Switch, Redirect } from 'react-router-dom'\nimport { CHAT_ROUTE, LOGIN_ROUTE } from '../utils/consts'\nimport { privateRoutes, publicRoutes } from '../routes'\nimport {useAuthState} from \"react-firebase-hooks/auth\";\nimport {Context} from \"../index\";\n\nconst AppRouter = () => {\n    const {auth} = useContext(Context)\n    const [user] = useAuthState(auth)\n\n    return user ? \n        (\n            <Switch>\n                {privateRoutes.map(({path, Component}) => \n                    <Route key={path} path={path} component={Component} exact={true}/>\n                )}\n                <Redirect to={CHAT_ROUTE}/>\n            </Switch>\n        )\n        :\n        (\n            <Switch>\n                {publicRoutes.map(({path, Component}) => \n                    <Route key={path} path={path} component={Component} exact={true}/>\n                )}\n                <Redirect to={LOGIN_ROUTE}/>\n            </Switch>\n        )\n}\n\nexport default AppRouter","import React, {useContext} from 'react'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport {Button, Grid} from '@material-ui/core'\nimport {NavLink} from 'react-router-dom'\nimport {LOGIN_ROUTE} from '../utils/consts'\nimport {Context} from \"../index\";\nimport {useAuthState} from \"react-firebase-hooks/auth\";\n\n\nconst Navbar = () => {\n    const {auth} = useContext(Context)\n    const [user] = useAuthState(auth)\n\n    return (\n        <AppBar position=\"static\">\n            <Toolbar variant={\"dense\"}>\n                <Grid container justify={\"flex-end\"}>\n                    {user ?\n                        <Button onClick={() => auth.signOut()}>Выйти</Button>\n                        :\n                        <NavLink to={LOGIN_ROUTE}>\n                            <Button>Логин</Button>\n                        </NavLink>\n                    }\n                </Grid>\n            </Toolbar>\n        </AppBar>\n    )\n}\n\nexport default Navbar","import { BrowserRouter } from 'react-router-dom'\nimport AppRouter from './components/AppRouter'\nimport Navbar from './components/Navbar'\nimport React, {useContext} from \"react\";\nimport {Context} from \"./index\";\nimport {useAuthState} from \"react-firebase-hooks/auth\";\nimport Loader from \"./components/Loader\";\n\nfunction App() {\n    const {auth} = useContext(Context)\n    const [user, loading, error] = useAuthState(auth)\n\n    if (loading) {\n        return <Loader />\n    }\n\n  return (\n    <BrowserRouter>\n      <Navbar/>\n      <AppRouter/>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React, {createContext} from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport firebase from \"firebase\";\nimport 'firebase/firestore'\nimport 'firebase/auth'\n\nfirebase.initializeApp({\n    apiKey: \"AIzaSyCuuAXbn99vaBBx-73wGOOB-Zg6phCZQrU\",\n    authDomain: \"chat-fbsrct.firebaseapp.com\",\n    projectId: \"chat-fbsrct\",\n    storageBucket: \"chat-fbsrct.appspot.com\",\n    messagingSenderId: \"545532414519\",\n    appId: \"1:545532414519:web:332853a505f970323e4db2\",\n    measurementId: \"G-RJPS65PC9R\"\n})\n\nexport const Context = createContext(null)\n\nconst auth = firebase.auth()\nconst firestore = firebase.firestore()\n\nReactDOM.render(\n  <React.StrictMode>\n      <Context.Provider value={{\n          firebase,\n          auth,\n          firestore\n      }}>\n          <App />\n      </Context.Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}